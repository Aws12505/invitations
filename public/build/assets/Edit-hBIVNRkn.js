import{r as o,j as e,H as w,a as N}from"./app-DkqyKFeN.js";import{A as I}from"./app-layout-BSVVhtqb.js";import{B as x}from"./button-Bt9w2FSp.js";import{C as n,a as u,b as h,d as k,c as d}from"./card-Bg3YwbiD.js";import{F as m}from"./form-field-B40fLBUC.js";import{L as l}from"./label-DXJ9JafH.js";import{S as D,a as F,b as E,c as P,d as p}from"./select-BuBpSChP.js";import{S as U}from"./switch-BHj23ALY.js";import{S as _}from"./separator-BvFesgXw.js";import{t as j}from"./index-BMwzMuSD.js";/* empty css            */import"./createLucideIcon-Ker767Zn.js";import"./index-DEd2auVS.js";import"./index-DDbRNWM1.js";import"./index-V0mboVAM.js";import"./index-D9ysXGZn.js";import"./index-mGxC4ot0.js";import"./index-DWpKZ1Ke.js";import"./app-logo-icon-BV7djkq2.js";import"./users-BJq1aWM8.js";import"./armchair-BmBdcELM.js";import"./input-BhPLl4ID.js";import"./check-DCCOmK1b.js";const $=[{title:"Invitation Links",href:"/invitation-links"},{title:"Edit",href:"#"}];function re({invitationLink:s}){const[a,b]=o.useState({first_name:s.first_name,father_name:s.father_name,last_name:s.last_name,limit:s.limit,default_vip_status:s.default_vip_status,is_active:s.is_active}),[r,f]=o.useState({}),[g,v]=o.useState(!1),y=t=>{t.preventDefault(),v(!0),f({}),N.patch(`/invitation-links/${s.id}`,{...a},{onSuccess:()=>{j.success("Invitation link updated successfully!")},onError:c=>{f(c),j.error("Please check the form for errors")},onFinish:()=>v(!1)})},i=(t,c)=>{b(S=>({...S,[t]:c}))},C=()=>{const t=`${window.location.origin}/invitation/${s.token}`;navigator.clipboard.writeText(t).then(()=>{j.success("Invitation link copied to clipboard!")})};return e.jsxs(I,{breadcrumbs:$,children:[e.jsx(w,{title:`Edit ${s.full_name} - Invitation Link`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Edit Invitation Link"}),e.jsx("p",{className:"text-muted-foreground",children:"Update invitation link details and configuration"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs(n,{children:[e.jsxs(u,{children:[e.jsx(h,{children:"Invitation Link Information"}),e.jsx(k,{children:"Update the primary invitee details and link settings"})]}),e.jsx(d,{children:e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx(m,{id:"first_name",name:"first_name",label:"First Name",value:a.first_name,onChange:t=>i("first_name",t.target.value),error:r.first_name,required:!0}),e.jsx(m,{id:"father_name",name:"father_name",label:"Father's Name",value:a.father_name,onChange:t=>i("father_name",t.target.value),error:r.father_name,required:!0})]}),e.jsx(m,{id:"last_name",name:"last_name",label:"Last Name",value:a.last_name,onChange:t=>i("last_name",t.target.value),error:r.last_name,required:!0}),e.jsx(_,{}),e.jsx(m,{id:"limit",name:"limit",type:"number",label:"Invitation Limit",value:a.limit,onChange:t=>i("limit",parseInt(t.target.value)||0),error:r.limit,description:`Currently ${s.usage} people have registered. You cannot set the limit below this number.`,min:s.usage,max:1e3,required:!0}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"default_vip_status",className:"text-sm font-medium",children:["Default VIP Status",e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsxs(D,{value:a.default_vip_status,onValueChange:t=>i("default_vip_status",t),children:[e.jsx(F,{children:e.jsx(E,{placeholder:"Select VIP status"})}),e.jsxs(P,{children:[e.jsx(p,{value:"regular",children:"Regular"}),e.jsx(p,{value:"vip",children:"VIP"}),e.jsx(p,{value:"premium",children:"Premium"})]})]}),r.default_vip_status&&e.jsx("p",{className:"text-xs text-destructive",children:r.default_vip_status}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"New attendants registering through this link will have this VIP status"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{id:"is_active",checked:a.is_active,onCheckedChange:t=>i("is_active",t)}),e.jsx(l,{htmlFor:"is_active",children:"Active invitation link"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"When inactive, people cannot register using this invitation link"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(x,{type:"submit",disabled:g,children:g?"Updating...":"Update Invitation Link"}),e.jsx(x,{type:"button",variant:"outline",onClick:()=>N.visit("/invitation-links"),children:"Cancel"})]})]})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(n,{children:[e.jsx(u,{children:e.jsx(h,{children:"Link Information"})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Token"}),e.jsx("p",{className:"text-xs font-mono mt-1 p-2 bg-muted rounded border",children:s.token})]}),e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Invitation URL"}),e.jsx("div",{className:"mt-1 p-2 bg-muted rounded border",children:e.jsx("p",{className:"text-xs break-all",children:`${window.location.origin}/invitation/${s.token}`})}),e.jsx(x,{variant:"outline",size:"sm",className:"w-full mt-2",onClick:C,children:"Copy Link"})]}),e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),e.jsx("p",{className:"text-sm mt-1",children:new Date(s.created_at).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Last Updated"}),e.jsx("p",{className:"text-sm mt-1",children:new Date(s.updated_at).toLocaleString()})]})]})]}),e.jsxs(n,{children:[e.jsx(u,{children:e.jsx(h,{children:"Usage Statistics"})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Registrations"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.usage," / ",s.limit]})]}),e.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${Math.min(s.usage/s.limit*100,100)}%`}})}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[Math.round(s.usage/s.limit*100),"% capacity used"]})]}),e.jsx(_,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Available slots:"}),e.jsx("span",{className:"font-medium",children:Math.max(0,s.limit-s.usage)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Total registered:"}),e.jsx("span",{className:"font-medium",children:s.usage})]})]})]})]}),!a.is_active&&s.is_active&&e.jsx(n,{className:"border-orange-200 bg-orange-50 dark:border-orange-800 dark:bg-orange-950",children:e.jsx(d,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center mt-0.5",children:e.jsx("span",{className:"text-orange-600 text-sm",children:"!"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-orange-900 dark:text-orange-100 text-sm",children:"Deactivating this link"}),e.jsx("p",{className:"text-xs text-orange-700 dark:text-orange-300",children:"People will no longer be able to register through this link"})]})]})})})]})]})]})]})}export{re as default};
