import{r as h,j as e,H as ee,L as F,a as _}from"./app-ABjsRsQJ.js";import{A as se}from"./app-layout-Bymi0NUq.js";import{B as l}from"./button-DJGAu1mx.js";import{C as o,a as m,b as x,c as u,d as ae}from"./card-BJPYDRlU.js";import{B as R}from"./badge-B0fetXZG.js";import{T as re,a as ie,b as k,c as j,d as ne,e as d}from"./table-Ci3yzYJg.js";import{I as le}from"./input-BzrIRQsH.js";import{S as A,a as y,b as D,c as I,d as t}from"./select-CHoeXn-A.js";import{D as M,b as V,c as P,d as U,e as B,f as H}from"./dialog-Dca-JPAu.js";import{T as te,A as ce,a as de,b as he,c as oe,d as me,e as xe,f as ue,g as je}from"./alert-dialog-CM9_q461.js";import{t as n}from"./index-CurYk9TL.js";import{A as E}from"./armchair-BDj8j0FG.js";import{C as L}from"./crown-NdTqxaGN.js";import{U as $}from"./user-CPv2PDvS.js";import{U as pe}from"./users-CK5M0Qhw.js";import{S as z}from"./search-Ddbz8h9m.js";import{R as ge}from"./rotate-ccw-t8tUjiy4.js";import{P as O}from"./plus-n2XcoUps.js";import{A as fe}from"./arrow-left-right-BOPVJJ6u.js";/* empty css            */import"./createLucideIcon-042iibch.js";import"./index-CG9sQuq8.js";import"./index-DDTFSEEs.js";import"./index-Bgx6gJaz.js";import"./index-Ce63WWzf.js";import"./index-CJu7nBmt.js";import"./index-vIQeZDU1.js";import"./app-logo-icon-DVnJtJ88.js";import"./check-DId1pAnl.js";const Ce=[{title:"Chair Assignment",href:"#"}];function Qe({attendants:v,statistics:i}){const[p,q]=h.useState(""),[g,G]=h.useState("all"),[f,J]=h.useState("all"),[a,b]=h.useState({open:!1,attendant:null,chairNumber:"",availableChairs:[]}),[r,N]=h.useState({open:!1,attendant1:null,attendant2Id:""}),[c,w]=h.useState({open:!1,attendant:null}),T=v.filter(s=>{const S=s.full_name.toLowerCase().includes(p.toLowerCase())||s.phone_number.includes(p)||(s.chair_number?.toString()||"").includes(p),C=g==="all"||g==="vip"&&(s.vip_status==="vip"||s.vip_status==="premium")||g==="regular"&&s.vip_status==="regular",Z=f==="all"||f==="assigned"&&s.chair_number||f==="unassigned"&&!s.chair_number;return S&&C&&Z}),K=()=>{if(!a.attendant||!a.chairNumber){n.error("Please select a chair number");return}_.patch(`/chair-assignment/${a.attendant.id}/assign`,{chair_number:parseInt(a.chairNumber)},{onSuccess:()=>{n.success("Chair assigned successfully"),b({open:!1,attendant:null,chairNumber:"",availableChairs:[]})},onError:s=>{n.error(s.chair_number||"Failed to assign chair")}})},Q=()=>{if(!r.attendant1||!r.attendant2Id){n.error("Please select both attendants");return}_.post("/chair-assignment/switch",{attendant1_id:r.attendant1.id,attendant2_id:parseInt(r.attendant2Id)},{onSuccess:()=>{n.success("Chairs switched successfully"),N({open:!1,attendant1:null,attendant2Id:""})},onError:()=>{n.error("Failed to switch chairs")}})},W=()=>{c.attendant&&_.delete(`/chair-assignment/${c.attendant.id}/remove`,{onSuccess:()=>{n.success("Chair assignment removed"),w({open:!1,attendant:null})},onError:()=>{n.error("Failed to remove chair assignment")}})},X=s=>{_.post(`/chair-assignment/${s.id}/auto-assign`,{},{onSuccess:()=>{n.success("Chair auto-assigned successfully")},onError:S=>{n.error(S.chair||"Failed to auto-assign chair")}})},Y=(s,S)=>{if(!s)return e.jsx(R,{variant:"outline",children:"No Chair"});const C=s<=250;return e.jsxs(R,{variant:C?"default":"secondary",className:C?"bg-purple-100 text-purple-800 border-purple-200":"",children:[C?e.jsx(L,{className:"h-3 w-3 mr-1"}):e.jsx($,{className:"h-3 w-3 mr-1"}),"Chair ",s]})};return e.jsxs(se,{breadcrumbs:Ce,children:[e.jsx(ee,{title:"Chair Assignment"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Chair Assignment"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage seating arrangements for all attendants"})]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(o,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Total Chairs"}),e.jsx(E,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(u,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i.total_chairs}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[i.total_occupied," occupied, ",i.total_available," available"]})]})]}),e.jsxs(o,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"VIP Section"}),e.jsx(L,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(u,{children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[i.vip_occupied,"/",i.vip_total]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(i.vip_occupied/i.vip_total*100),"% occupied"]})]})]}),e.jsxs(o,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Regular Section"}),e.jsx($,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(u,{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[i.regular_occupied,"/",i.regular_total]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(i.regular_occupied/i.regular_total*100),"% occupied"]})]})]}),e.jsxs(o,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Unassigned"}),e.jsx(pe,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(u,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:v.filter(s=>!s.chair_number).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Attendants without chairs"})]})]})]}),e.jsxs(o,{children:[e.jsx(m,{children:e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5"}),"Filters"]})}),e.jsxs(u,{children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"h-4 w-4 absolute left-3 top-3 text-muted-foreground"}),e.jsx(le,{placeholder:"Search by name, phone, or chair...",value:p,onChange:s=>q(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Section"}),e.jsxs(A,{value:g,onValueChange:G,children:[e.jsx(y,{children:e.jsx(D,{})}),e.jsxs(I,{children:[e.jsx(t,{value:"all",children:"All Sections"}),e.jsx(t,{value:"vip",children:"VIP Section (1-250)"}),e.jsx(t,{value:"regular",children:"Regular Section (251-360)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Chair Status"}),e.jsxs(A,{value:f,onValueChange:J,children:[e.jsx(y,{children:e.jsx(D,{})}),e.jsxs(I,{children:[e.jsx(t,{value:"all",children:"All"}),e.jsx(t,{value:"assigned",children:"Assigned"}),e.jsx(t,{value:"unassigned",children:"Unassigned"})]})]})]})]}),e.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:["Showing ",T.length," of ",v.length," attendants"]})]})]}),e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"Chair Assignments"}),e.jsx(ae,{children:"Manage chair assignments for all attendants"})]}),e.jsx(u,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(re,{children:[e.jsx(ie,{children:e.jsxs(k,{children:[e.jsx(j,{children:"Name"}),e.jsx(j,{children:"VIP Status"}),e.jsx(j,{children:"Chair Assignment"}),e.jsx(j,{children:"Invited By"}),e.jsx(j,{children:"Phone"}),e.jsx(j,{className:"text-right",children:"Actions"})]})}),e.jsx(ne,{children:T.length>0?T.map(s=>e.jsxs(k,{children:[e.jsx(d,{className:"font-medium",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.full_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["ID: ",s.id]})]})}),e.jsx(d,{children:e.jsx(R,{variant:s.vip_status==="vip"||s.vip_status==="premium"?"default":"secondary",children:s.vip_status.toUpperCase()})}),e.jsx(d,{children:Y(s.chair_number,s.vip_status)}),e.jsx(d,{children:s.invitation_link?.full_name||"Unknown"}),e.jsx(d,{className:"text-sm",children:s.phone_number}),e.jsx(d,{className:"text-right",children:e.jsx("div",{className:"flex items-center justify-end gap-1",children:s.chair_number?e.jsxs(e.Fragment,{children:[e.jsx(l,{variant:"outline",size:"sm",asChild:!0,title:"Change chair",children:e.jsx(F,{href:`/chair-assignment/${s.id}/assign`,children:e.jsx(O,{className:"h-3 w-3"})})}),e.jsx(l,{variant:"outline",size:"sm",asChild:!0,title:"Switch chairs",children:e.jsx(F,{href:`/chair-assignment/${s.id}/switch`,children:e.jsx(fe,{className:"h-3 w-3"})})}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>w({open:!0,attendant:s}),title:"Remove chair",className:"text-red-600 hover:text-red-700",children:e.jsx(te,{className:"h-3 w-3"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>X(s),title:"Auto assign chair",children:e.jsx(ge,{className:"h-3 w-3"})}),e.jsx(l,{variant:"outline",size:"sm",asChild:!0,title:"Manually assign chair",children:e.jsx(F,{href:`/chair-assignment/${s.id}/assign`,children:e.jsx(O,{className:"h-3 w-3"})})})]})})})]},s.id)):e.jsx(k,{children:e.jsx(d,{colSpan:6,className:"text-center py-8",children:e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx(E,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{children:"No attendants found"}),e.jsx("p",{className:"text-sm",children:p||g!=="all"||f!=="all"?"Try adjusting your filters":"No attendants registered yet"})]})})})})]})})})]})]}),e.jsx(M,{open:a.open,onOpenChange:s=>b({...a,open:s}),children:e.jsxs(V,{children:[e.jsxs(P,{children:[e.jsx(U,{children:a.attendant?.chair_number?"Change Chair":"Assign Chair"}),e.jsx(B,{children:a.attendant&&e.jsxs(e.Fragment,{children:["Assigning chair for: ",e.jsx("strong",{children:a.attendant.full_name}),e.jsx("br",{}),"VIP Status: ",e.jsx("strong",{children:a.attendant.vip_status.toUpperCase()}),a.attendant.chair_number&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),"Current Chair: ",e.jsxs("strong",{children:["#",a.attendant.chair_number]})]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Chair Number"}),e.jsxs(A,{value:a.chairNumber,onValueChange:s=>b({...a,chairNumber:s}),children:[e.jsx(y,{children:e.jsx(D,{placeholder:"Select a chair"})}),e.jsx(I,{children:a.availableChairs.map(s=>e.jsxs(t,{value:s.toString(),children:["Chair ",s," (",s<=250?"VIP":"Regular"," Section)"]},s))})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Available chairs: ",a.availableChairs.length]})]}),e.jsxs(H,{children:[e.jsx(l,{variant:"outline",onClick:()=>b({...a,open:!1}),children:"Cancel"}),e.jsx(l,{onClick:K,children:a.attendant?.chair_number?"Change Chair":"Assign Chair"})]})]})}),e.jsx(M,{open:r.open,onOpenChange:s=>N({...r,open:s}),children:e.jsxs(V,{children:[e.jsxs(P,{children:[e.jsx(U,{children:"Switch Chairs"}),e.jsx(B,{children:r.attendant1&&e.jsxs(e.Fragment,{children:["Switching chair for: ",e.jsx("strong",{children:r.attendant1.full_name}),"(Currently: Chair #",r.attendant1.chair_number,")"]})})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Switch with"}),e.jsxs(A,{value:r.attendant2Id,onValueChange:s=>N({...r,attendant2Id:s}),children:[e.jsx(y,{children:e.jsx(D,{placeholder:"Select attendant to switch with"})}),e.jsx(I,{children:v.filter(s=>s.id!==r.attendant1?.id&&s.chair_number).map(s=>e.jsxs(t,{value:s.id.toString(),children:[s.full_name," - Chair #",s.chair_number]},s.id))})]})]})}),e.jsxs(H,{children:[e.jsx(l,{variant:"outline",onClick:()=>N({...r,open:!1}),children:"Cancel"}),e.jsx(l,{onClick:Q,children:"Switch Chairs"})]})]})}),e.jsx(ce,{open:c.open,onOpenChange:s=>w({...c,open:s}),children:e.jsxs(de,{children:[e.jsxs(he,{children:[e.jsx(oe,{children:"Remove Chair Assignment?"}),e.jsxs(me,{children:["This will remove the chair assignment for"," ",e.jsx("strong",{children:c.attendant?.full_name}),c.attendant?.chair_number&&e.jsxs(e.Fragment,{children:[" (Chair #",c.attendant.chair_number,")"]}),". The chair will become available for other attendants."]})]}),e.jsxs(xe,{children:[e.jsx(ue,{onClick:()=>w({open:!1,attendant:null}),children:"Cancel"}),e.jsx(je,{onClick:W,className:"bg-red-600 hover:bg-red-700",children:"Remove Chair"})]})]})})]})}export{Qe as default};
