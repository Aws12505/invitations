import{r as k,j as e,L as f,a as p,H as D}from"./app-CtcDIlsc.js";import{A as $}from"./app-layout-h9UkTarG.js";import{B as r}from"./button-BWNuTd8n.js";import{C as i,a as l,b as n,c,d as g}from"./card-BNkVdPxa.js";import{B as A}from"./badge-CgSmYn1Z.js";import{S as R}from"./separator-g_ogy2g_.js";import{Q as U}from"./QrCodeDisplay-CqV3lk9M.js";import{A as L,h as P,T,a as I,b as E,c as B,d as F,e as z,f as Q,g as H}from"./alert-dialog-EHQ24MiB.js";import{t as o}from"./index-CY9GR9YH.js";import{A as N}from"./armchair-CtMSput-.js";import{C as V}from"./crown-Dlzh6RR5.js";import{U as _}from"./user-CwDGMHL4.js";import{R as O}from"./rotate-ccw-DHOcWG-b.js";import{P as v}from"./plus-DBPTwOJR.js";import{S as q,C as b,E as C}from"./square-pen-DU-Soc4F.js";import{P as w}from"./phone-Dy_sP-_h.js";import{U as M}from"./users-DVkxot4G.js";import{C as X}from"./calendar-C8s8ZyjA.js";import{U as G}from"./user-check-B3fVcHJ0.js";import{U as W}from"./user-x-DK_-IYc9.js";import{C as y}from"./clock-RJ-6b9WO.js";import{C as J}from"./circle-x-CB-K_ZyF.js";import{C as K}from"./circle-check-big-DHRErfHF.js";/* empty css            */import"./createLucideIcon-GVte-zZo.js";import"./index-DOG0P_Jw.js";import"./index-SFZIEt5i.js";import"./index-CC7XR_KE.js";import"./index-Bvl3ChLw.js";import"./index-ybkMdk5e.js";import"./index-SWHS4kFd.js";import"./app-logo-icon-DtBuXxU-.js";import"./dialog-DcShTMBr.js";function Y({attendant:s,showActions:m=!0}){const[h,x]=k.useState(!1),d=()=>{p.post(`/chair-assignment/${s.id}/auto-assign`,{},{onSuccess:()=>{o.success("Chair auto-assigned successfully")},onError:a=>{o.error(a.chair||"Failed to auto-assign chair")}})},u=()=>{p.delete(`/chair-assignment/${s.id}/remove`,{onSuccess:()=>{o.success("Chair assignment removed"),x(!1)},onError:()=>{o.error("Failed to remove chair assignment")}})},t=()=>{if(!s.chair_number)return e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(N,{className:"h-5 w-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"No chair assigned"}),e.jsx("p",{className:"text-sm",children:"This attendant doesn't have a seat yet"})]})]});const a=s.chair_number<=50;return e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:a?e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(V,{className:"h-6 w-6 text-purple-600"})}):e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(_,{className:"h-6 w-6 text-blue-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsxs(A,{variant:a?"default":"secondary",className:"text-lg px-3 py-1",children:["Chair ",s.chair_number]})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a?"Section (Chairs 1-50)":"Section (Chairs 51-360)"}),s.invitation_link&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Grouped with ",s.invitation_link.full_name,"'s invitation"]})]})]})},j=()=>m?s.chair_number?e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(r,{variant:"outline",size:"sm",asChild:!0,title:"Change chair assignment",children:e.jsx(f,{href:`/chair-assignment/${s.id}/assign`,children:e.jsx(v,{className:"h-3 w-3"})})}),e.jsxs(L,{open:h,onOpenChange:x,children:[e.jsx(P,{asChild:!0,children:e.jsx(r,{variant:"outline",size:"sm",title:"Remove chair assignment",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(T,{className:"h-3 w-3"})})}),e.jsxs(I,{children:[e.jsxs(E,{children:[e.jsx(B,{children:"Remove Chair Assignment?"}),e.jsxs(F,{children:["This will remove Chair #",s.chair_number," from ",s.full_name,". The chair will become available for other attendants."]})]}),e.jsxs(z,{children:[e.jsx(Q,{children:"Cancel"}),e.jsx(H,{onClick:u,className:"bg-red-600 hover:bg-red-700",children:"Remove Chair"})]})]})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{onClick:d,className:"w-full",size:"sm",children:[e.jsx(O,{className:"h-3 w-3 mr-2"}),"Auto Assign Chair"]}),e.jsx(r,{variant:"outline",asChild:!0,className:"w-full",size:"sm",children:e.jsxs(f,{href:`/chair-assignment/${s.id}/assign`,children:[e.jsx(v,{className:"h-3 w-3 mr-2"}),"Choose Specific Chair"]})})]}):null;return e.jsxs(i,{children:[e.jsx(l,{children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5"}),"Chair Assignment"]})}),e.jsxs(c,{className:"space-y-4",children:[t(),m&&e.jsx("div",{className:"pt-2 border-t",children:j()})]})]})}const Z=[{title:"Attendants",href:"/attendants"},{title:"Details",href:"#"}];function Le({attendant:s}){const m=()=>{const t=`${window.location.origin}/status/${s.status_token}`;navigator.clipboard.writeText(t).then(()=>{o.success("Status link copied to clipboard!")})},h=(t,j)=>{p.patch(`/attendants/${t}/toggle-attended`,{},{onSuccess:()=>{const S=!j?"Attendant marked as attended":"Attendant marked as not attended";o.success(S)},onError:a=>{o.error(a.attended||"Failed to update attendance status")}})},d=(t=>{switch(t){case"coming":return{label:"Coming",icon:K,className:"text-green-600 bg-green-50 border-green-200",description:"Confirmed attendance"};case"maybe":return{label:"Maybe",icon:y,className:"text-yellow-600 bg-yellow-50 border-yellow-200",description:"Uncertain about attendance"};case"not_coming":return{label:"Not Coming",icon:J,className:"text-red-600 bg-red-50 border-red-200",description:"Declined attendance"};default:return{label:"No Response",icon:y,className:"text-gray-600 bg-gray-50 border-gray-200",description:"No response received yet"}}})(s.attendance_status),u=d.icon;return e.jsxs($,{breadcrumbs:Z,children:[e.jsx(D,{title:`${s.full_name} - Attendant Details`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:s.full_name}),e.jsxs("p",{className:"text-muted-foreground",children:["Attendant ID: ",s.id]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{variant:"outline",asChild:!0,children:e.jsxs(f,{href:`/attendants/${s.id}/edit`,children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Edit"]})}),e.jsxs(r,{variant:"outline",onClick:m,children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Copy Status Link"]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[e.jsxs(i,{children:[e.jsx(l,{children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5"}),"Personal Information"]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"First Name"}),e.jsx("p",{className:"text-lg font-medium",children:s.first_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Father's Name"}),e.jsx("p",{className:"text-lg font-medium",children:s.father_name})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Last Name"}),e.jsx("p",{className:"text-lg font-medium",children:s.last_name})]}),e.jsx(R,{}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone Number"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(w,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("a",{href:`tel:${s.phone_number}`,className:"text-lg font-medium text-blue-600 hover:underline",children:s.phone_number})]})]})]})]}),e.jsxs(i,{children:[e.jsx(l,{children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-5 w-5"}),"Invitation Details"]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Invited By"}),e.jsx("p",{className:"text-lg font-medium",children:s.invitation_link?.full_name||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"VIP Status"}),e.jsx("div",{className:"mt-1",children:e.jsx(A,{variant:s.vip_status==="vip"?"default":"secondary",className:"text-sm",children:s.vip_status.toUpperCase()})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Registration Date"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(X,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-lg font-medium",children:new Date(s.created_at).toLocaleDateString()}),e.jsxs("span",{className:"text-muted-foreground",children:["at ",new Date(s.created_at).toLocaleTimeString()]})]})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsx(n,{children:"Response Status"}),e.jsx(g,{children:"Current attendance response"})]}),e.jsxs(c,{children:[e.jsxs("div",{className:`p-4 rounded-lg border ${d.className}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(u,{className:"h-6 w-6"}),e.jsx("span",{className:"text-lg font-semibold",children:d.label})]}),e.jsx("p",{className:"text-sm opacity-80",children:d.description})]}),s.attendance_status&&e.jsx("div",{className:"mt-4 text-sm text-muted-foreground",children:e.jsxs("p",{children:["Last updated: ",new Date(s.updated_at).toLocaleString()]})})]})]}),e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsx(n,{children:"Actual Attendance"}),e.jsx(g,{children:"Did they actually attend the event?"})]}),e.jsxs(c,{className:"space-y-4",children:[e.jsx("div",{className:`p-4 rounded-lg border ${s.attended?"text-green-600 bg-green-50 border-green-200":"text-gray-600 bg-gray-50 border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[s.attended?e.jsx(G,{className:"h-6 w-6"}):e.jsx(W,{className:"h-6 w-6"}),e.jsx("span",{className:"text-lg font-semibold",children:s.attended?"Attended":"Not Attended"})]})}),e.jsxs(r,{onClick:()=>h(s.id,s.attended),variant:s.attended?"outline":"default",className:"w-full",children:["Mark as ",s.attended?"Not Attended":"Attended"]})]})]}),e.jsxs(i,{children:[e.jsx(l,{children:e.jsx(n,{children:"Quick Actions"})}),e.jsxs(c,{className:"space-y-3",children:[e.jsx(r,{variant:"outline",className:"w-full justify-start",asChild:!0,children:e.jsxs("a",{href:`/status/${s.status_token}`,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"View Status Page"]})}),e.jsxs(r,{variant:"outline",className:"w-full justify-start",onClick:m,children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Copy Status Link"]}),e.jsx(r,{variant:"outline",className:"w-full justify-start",asChild:!0,children:e.jsxs("a",{href:`https://wa.me/${s.phone_number}/`,children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Contact Attendant"]})}),e.jsx(r,{variant:"outline",className:"w-full justify-start",asChild:!0,children:e.jsxs("a",{href:s.qr_code_url,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"View Public Profile"]})})]})]}),e.jsxs(i,{children:[e.jsx(l,{children:e.jsx(n,{children:"QR Code"})}),e.jsxs(c,{children:[e.jsx(U,{attendant:s,size:"md"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Share this QR code for easy profile access"})]})]}),e.jsx(Y,{attendant:s})]})]})]})]})}export{Le as default};
