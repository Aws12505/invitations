import{j as e,r as C,H as k,L as N,a as A}from"./app-ABjsRsQJ.js";import{A as D}from"./app-layout-Bymi0NUq.js";import{B as l}from"./button-DJGAu1mx.js";import{C as c,a as d,b as x,c as h,d as I}from"./card-BJPYDRlU.js";import{B as w}from"./badge-B0fetXZG.js";import{T as _,a as T,b,c as r,d as P,e as n}from"./table-Ci3yzYJg.js";import{T as L,A as E,a as S,b as $,c as H,d as M,e as z,f as B,g as U}from"./alert-dialog-CM9_q461.js";import{t as p}from"./index-CurYk9TL.js";import{P as F,a as R,b as v,c as V,d as q,e as O,f as G,E as J}from"./pagination-BZdwniso.js";import{P as y}from"./plus-n2XcoUps.js";import{C as K,S as Q}from"./square-pen-FJ3stx26.js";import{E as W}from"./external-link-COt8iz5I.js";/* empty css            */import"./createLucideIcon-042iibch.js";import"./index-CG9sQuq8.js";import"./index-DDTFSEEs.js";import"./index-Bgx6gJaz.js";import"./index-Ce63WWzf.js";import"./index-CJu7nBmt.js";import"./index-vIQeZDU1.js";import"./app-logo-icon-DVnJtJ88.js";import"./users-CK5M0Qhw.js";import"./armchair-BDj8j0FG.js";function X({data:i}){const{links:a,current_page:o,last_page:m,prev_page_url:j,next_page_url:u}=i;return m<=1?null:e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:["Showing ",i.from||0," to ",i.to||0," of ",i.total," results"]}),e.jsx(F,{children:e.jsxs(R,{children:[j&&e.jsx(v,{children:e.jsx(V,{href:j})}),a&&a.slice(1,-1).map((t,f)=>t.label==="..."?e.jsx(v,{children:e.jsx(q,{})},f):e.jsx(v,{children:e.jsx(O,{href:t.url||"#",isActive:t.active,children:t.label})},f)),u&&e.jsx(v,{children:e.jsx(G,{href:u})})]})})]})}const Y=[{title:"Invitation Links",href:"#"}];function we({invitationLinks:i,statistics:a}){const[o,m]=C.useState({open:!1,linkId:null,linkName:""}),j=s=>{const g=`${window.location.origin}/invitation/${s}`;navigator.clipboard.writeText(g).then(()=>{p.success("Invitation link copied to clipboard!")}).catch(()=>{p.error("Failed to copy link to clipboard")})},u=(s,g)=>{m({open:!0,linkId:s,linkName:g})},t=()=>{m({open:!1,linkId:null,linkName:""})},f=()=>{o.linkId&&A.delete(`/invitation-links/${o.linkId}`,{onSuccess:()=>{p.success("Invitation link deleted successfully"),t()},onError:()=>{p.error("Failed to delete invitation link")}})};return e.jsxs(D,{breadcrumbs:Y,children:[e.jsx(k,{title:"Invitation Links"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Invitation Links"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage invitation links and track their usage"})]}),e.jsx(N,{href:"/invitation-links/create",children:e.jsxs(l,{children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Create Link"]})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(c,{children:[e.jsx(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:e.jsx(x,{className:"text-sm font-medium",children:"Total Links"})}),e.jsx(h,{children:e.jsx("div",{className:"text-2xl font-bold",children:a.total})})]}),e.jsxs(c,{children:[e.jsx(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:e.jsx(x,{className:"text-sm font-medium",children:"Active Links"})}),e.jsx(h,{children:e.jsx("div",{className:"text-2xl font-bold",children:a.active})})]}),e.jsxs(c,{children:[e.jsx(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:e.jsx(x,{className:"text-sm font-medium",children:"Total Attendants"})}),e.jsx(h,{children:e.jsx("div",{className:"text-2xl font-bold",children:a.totalAttendants})})]}),e.jsxs(c,{children:[e.jsx(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:e.jsx(x,{className:"text-sm font-medium",children:"Avg Usage"})}),e.jsx(h,{children:e.jsx("div",{className:"text-2xl font-bold",children:a.avgUsage})})]})]}),e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsx(x,{children:"Invitation Links"}),e.jsx(I,{children:"A list of all invitation links and their current usage"})]}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs(_,{children:[e.jsx(T,{children:e.jsxs(b,{children:[e.jsx(r,{children:"Name"}),e.jsx(r,{children:"Usage"}),e.jsx(r,{children:"VIP Status"}),e.jsx(r,{children:"Status"}),e.jsx(r,{children:"Created"}),e.jsx(r,{className:"text-right",children:"Actions"})]})}),e.jsx(P,{children:i.data.length>0?i.data.map(s=>e.jsxs(b,{children:[e.jsx(n,{className:"font-medium",children:s.full_name}),e.jsx(n,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{children:[s.usage," / ",s.limit]}),e.jsx("div",{className:"w-20 bg-secondary rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${Math.min(s.usage/s.limit*100,100)}%`}})})]})}),e.jsx(n,{children:e.jsx(w,{variant:s.default_vip_status==="vip"?"default":"secondary",children:s.default_vip_status.toUpperCase()})}),e.jsx(n,{children:e.jsx(w,{variant:s.is_active?"default":"destructive",children:s.is_active?"Active":"Inactive"})}),e.jsx(n,{children:new Date(s.created_at).toLocaleDateString()}),e.jsx(n,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>j(s.token),title:"Copy invitation link",children:e.jsx(K,{className:"h-3 w-3"})}),e.jsx(l,{variant:"outline",size:"sm",asChild:!0,title:"Preview invitation",children:e.jsx("a",{href:`/invitation/${s.token}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx(W,{className:"h-3 w-3"})})}),e.jsx(l,{variant:"outline",size:"sm",asChild:!0,title:"View details",children:e.jsx(N,{href:`/invitation-links/${s.id}`,children:e.jsx(J,{className:"h-3 w-3"})})}),e.jsx(l,{variant:"outline",size:"sm",asChild:!0,title:"Edit invitation",children:e.jsx(N,{href:`/invitation-links/${s.id}/edit`,children:e.jsx(Q,{className:"h-3 w-3"})})}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>u(s.id,s.full_name),title:"Delete invitation",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(L,{className:"h-3 w-3"})})]})})]},s.id)):e.jsx(b,{children:e.jsx(n,{colSpan:6,className:"text-center py-8",children:e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx(y,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{children:"No invitation links found"}),e.jsx("p",{className:"text-sm",children:"Create your first invitation link to get started"})]})})})})]}),e.jsx(X,{data:i.pagination})]})]})]}),e.jsx(E,{open:o.open,onOpenChange:t,children:e.jsxs(S,{children:[e.jsxs($,{children:[e.jsx(H,{children:"Are you sure you want to delete this invitation?"}),e.jsxs(M,{children:["This will permanently delete the invitation link for ",e.jsx("strong",{children:o.linkName})," and all associated attendant registrations. This action cannot be undone."]})]}),e.jsxs(z,{children:[e.jsx(B,{onClick:t,children:"Cancel"}),e.jsx(U,{onClick:f,className:"bg-red-600 hover:bg-red-700 focus:ring-red-600",children:"Delete Invitation"})]})]})})]})}export{we as default};
